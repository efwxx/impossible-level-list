
<div class="flex flex-row justify-between mt-20">

  <!-- Sidebar -->

  <div class="lg:mt-0 flex flex-col flex-shrink lg:w-[480px] top-0 left-0 min-h-screen lg:visible lg:p-4 absolute lg:relative invisible">
    <!-- ILL random fact -->
    <div class="w-full p-4 flex-shrink bg-slate-300 dark:bg-slate-600 rounded-lg shadow-xl flex flex-col text-black 
    dark:text-white text-sm mb-4">
      <b class="text-lg"><fa-icon class="m-1" [icon]="i_illrf"></fa-icon>ILL random fact:</b>
      <p>{{ill_randomFact}}</p>

    </div>
  
  <!-- Staff -->
  <div class="flex flex-col">
    <div class="flex flex-row justify-end">
      <div class="flex flex-col items-center">
        <div class="w-full p-4 mt-4 flex-wrap bg-slate-300 dark:bg-slate-600 rounded-lg shadow-xl flex flex-col text-black 
        dark:text-white text-xs items-center">
        <b class="text-lg">Staff Members:</b>
        <div class="flex flex-row flex-wrap justify-center items-center">
          <p class="italic font-semibold text-xs p-1">Owners: </p>
          <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_doki"></fa-icon>doki</p>
          <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_Wuro"></fa-icon>Wuro</p>
          <!-- <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_Tomejito"></fa-icon>Tomejto</p> -->
        </div>
            <div class="flex flex-row flex-wrap justify-center items-center">
              <p class="italic font-semibold text-xs p-1">Head staff: </p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_maus999"></fa-icon>maus999</p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_knali"></fa-icon>Knali</p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_Eightos"></fa-icon>Eightos</p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-0" [icon]="i_Relayne"></fa-icon>elayne</p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_skele"></fa-icon>skeletonlol</p>
            </div>
            <div class="flex flex-row flex-wrap justify-center items-center">
              <p class="italic font-semibold text-xs p-1">Staff: </p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-0" [icon]="i_Pamka"></fa-icon>amka</p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_krx"></fa-icon>KrX</p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_ewe"></fa-icon>Ewe</p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_blanket"></fa-icon>BlanketAddict</p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_Locked101"></fa-icon>Locked101</p>
            </div>
            <div class="flex flex-row flex-wrap justify-center items-center">
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_Trin"></fa-icon>Trin</p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_sequoia"></fa-icon>sequoia</p>
            </div>
            <div class="flex flex-row flex-wrap justify-center items-center">
              <p class="italic font-semibold text-xs p-1">Helpers: </p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_zodiac"></fa-icon>Zodiac</p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_sobot"></fa-icon>sobot</p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_sobot"></fa-icon>MoonFrost</p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_sobot"></fa-icon>halapenie</p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_alex"></fa-icon>alex</p>
            </div>
            <div class="flex flex-row flex-wrap justify-center items-center">
              <p class="italic font-semibold text-xs p-1">Coders: </p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_MateussDev"></fa-icon>MateussDev</p>
            </div>
            <div class="flex flex-row flex-wrap justify-center items-center">
              <p class="italic font-semibold text-xs p-1">Artists: </p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_AuraXalaiv"></fa-icon>AuraXalaiv</p>
              <p class="p-1 hover:scale-110 transition-all duration-200 select-none"><fa-icon class="m-1" [icon]="i_Eightos"></fa-icon>Eightos</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- List -->

  <div class="dark:text-white mx-aut w-full mt-4">

    <!-- Search -->
    <div class="flex lg:flex-row items-center justify-between bg-white p-4 rounded-full h-fit shadow-lg w-full">
      <div class="flex flex-col w-full text-black">
        <div class="flex flex-row items-center justify-between w-full">
          <form class="w-full">
            <div class="flex flex-row items-center w-full">
              <fa-icon [icon]="i_search" class="mx-1 text-2xl text-gray-400"></fa-icon>
              <input type="text" [placeholder]="'Type in anything to search'" class="p-2 
              h-fit align-middle w-full text-black"
              [(ngModel)]="srch_input"/>
              <div class="group">
              </div>
              <input type="submit" class="text-white bg-blue-600 rounded-full p-3 mx-2 shadow-lg 
              hover:scale-105 hover:shadow-xl transition-all duration-300 disabled:bg-neutral-500"
              (click)="search_v2(srch_input, srch_criteria, srch_tags, srch_sortBy)" value="Search">

              <div class="p-1 bg-blue-600 rounded-full text-white text-2xl select-none" (click)="toggleSearchDropdown()">
                <fa-icon [icon]="i_expand" class="m-2"></fa-icon>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="relative lg:absolute w-full xl:right-96 lg:right-48 lg:translate-x-12 origin-top-right lg:w-64 mt-3 p-3 rounded-t-xl bg-slate-200 dark:bg-slate-800 shadow-2xl flex flex-col text-lg z-30 select-none" 
    *ngIf="srch_dropdown">

      <b><fa-icon [icon]="i_search" class="m-1"></fa-icon>Criteria:</b>
      <div class="flex flex-col text-base">
        
        <div class="flex flex-row items-center p-2 dark:hover:bg-slate-900 hover:bg-slate-500" (click)="selectCriteria('any')">
          <div class="h-full w-1 bg-blue-500 rounded-full scale-125" *ngIf="srch_criteria == 'any'">
            <b class="opacity-0">e</b>
          </div>
          <fa-icon [icon]="i_any" class="m-1"></fa-icon>
          <b class="font-normal">Any</b>
        </div>
        
        <div class="flex flex-row items-center p-2 dark:hover:bg-slate-900 hover:bg-slate-500" (click)="selectCriteria('name')">
          <div class="h-full w-1 bg-blue-500 rounded-full scale-125" *ngIf="srch_criteria == 'name'">
            <b class="opacity-0">e</b>
          </div>
          <fa-icon [icon]="i_name" class="m-1"></fa-icon>
          <b class="font-normal">Name</b>
        </div>
        
        <div class="flex flex-row items-center p-2 dark:hover:bg-slate-900 hover:bg-slate-500" (click)="selectCriteria('creator')">
          <div class="h-full w-1 bg-blue-500 rounded-full scale-125" *ngIf="srch_criteria == 'creator'">
            <b class="opacity-0">e</b>
          </div>
          <fa-icon [icon]="i_creator" class="m-1"></fa-icon>
          <b class="font-normal">Creator</b>
        </div>
        
        <div class="flex flex-row items-center p-2 dark:hover:bg-slate-900 hover:bg-slate-500" (click)="selectCriteria('fps')">
          <div class="h-full w-1 bg-blue-500 rounded-full scale-125" *ngIf="srch_criteria == 'fps'">
            <b class="opacity-0">e</b>
          </div>
          <fa-icon [icon]="i_fps" class="m-1"></fa-icon>
          <b class="font-normal">FPS</b>
        </div>
        
        <div class="flex flex-row items-center p-2 dark:hover:bg-slate-900 hover:bg-slate-500" (click)="selectCriteria('level_id')">
          <div class="h-full w-1 bg-blue-500 rounded-full scale-125" *ngIf="srch_criteria == 'level_id'">
            <b class="opacity-0">e</b>
          </div>
          <fa-icon [icon]="i_id" class="m-1"></fa-icon>
          <b class="font-normal">Level ID</b>
        </div>
      </div>

      <b><fa-icon [icon]="i_tag" class="m-1"></fa-icon>Tags:</b>
      <div class="flex flex-row flex-wrap">
        
        <div class="hover:scale-105 transition-all duration-200 flex flex-row m-1" (click)="toggleTag('2p')">
          <div class="bg-blue-500 rounded-full text-sm text-white" *ngIf="hasTag('2p')">
            <b class="text-sm font-normal m-1">2 player</b>
          </div>
          <div class="bg-slate-500 rounded-full text-sm text-white" *ngIf="!hasTag('2p')">
            <b class="text-sm font-normal m-1">2 player</b>
          </div>
        </div>
        
        <div class="hover:scale-105 transition-all duration-200 flex flex-row m-1" (click)="toggleTag('Unnerfed')">
          <div class="bg-blue-500 rounded-full text-sm text-white" *ngIf="hasTag('Unnerfed')">
            <b class="text-sm font-normal m-1">Unnerfed</b>
          </div>
          <div class="bg-slate-500 rounded-full text-sm text-white" *ngIf="!hasTag('Unnerfed')">
            <b class="text-sm font-normal m-1">Unnerfed</b>
          </div>
        </div>

        <div class="hover:scale-105 transition-all duration-200 flex flex-row m-1" (click)="toggleTag('Old version')">
          <div class="bg-blue-500 rounded-full text-sm text-white" *ngIf="hasTag('Old version')">
            <b class="text-sm font-normal m-1">Old version</b>
          </div>
          <div class="bg-slate-500 rounded-full text-sm text-white" *ngIf="!hasTag('Old version')">
            <b class="text-sm font-normal m-1">Old version</b>
          </div>
        </div>
        
        <div class="hover:scale-105 transition-all duration-200 flex flex-row m-1" (click)="toggleTag('Verified')">
          <div class="bg-blue-500 rounded-full text-sm text-white" *ngIf="hasTag('Verified')">
            <b class="text-sm font-normal m-1">Verified</b>
          </div>
          <div class="bg-slate-500 rounded-full text-sm text-white" *ngIf="!hasTag('Verified')">
            <b class="text-sm font-normal m-1">Verified</b>
          </div>
        </div>

        <div class="hover:scale-105 transition-all duration-200 flex flex-row m-1" (click)="toggleTag('Rated')">
          <div class="bg-blue-500 rounded-full text-sm text-white" *ngIf="hasTag('Rated')">
            <b class="text-sm font-normal m-1">Rated</b>
          </div>
          <div class="bg-slate-500 rounded-full text-sm text-white" *ngIf="!hasTag('Rated')">
            <b class="text-sm font-normal m-1">Rated</b>
          </div>
        </div>

        <div class="hover:scale-105 transition-all duration-200 flex flex-row m-1" (click)="toggleTag('Previously Rated')">
          <div class="bg-blue-500 rounded-full text-sm text-white" *ngIf="hasTag('Previously Rated')">
            <b class="text-sm font-normal m-1">Previously Rated</b>
          </div>
          <div class="bg-slate-500 rounded-full text-sm text-white" *ngIf="!hasTag('Previously Rated')">
            <b class="text-sm font-normal m-1">Previously Rated</b>
          </div>
        </div>

        <div class="hover:scale-105 transition-all duration-200 flex flex-row m-1" (click)="toggleTag('Fix Required')">
          <div class="bg-blue-500 rounded-full text-sm text-white" *ngIf="hasTag('Fix Required')">
            <b class="text-sm font-normal m-1">Fix Required</b>
          </div>
          <div class="bg-slate-500 rounded-full text-sm text-white" *ngIf="!hasTag('Fix Required')">
            <b class="text-sm font-normal m-1">Fix Required</b>
          </div>
        </div>
      </div>

      <b><fa-icon [icon]="i_sort" class="m-1"></fa-icon> Sort by:</b>
      <div class="flex flex-col text-base">
        
        <div class="flex flex-row items-center p-2 dark:hover:bg-slate-900 hover:bg-slate-500" (click)="selectSort('position')">
          <div class="h-full w-1 bg-blue-500 rounded-full scale-125" *ngIf="srch_sortBy == 'position'">
            <b class="opacity-0">e</b>
          </div>
          <fa-icon [icon]="i_position" class="m-1"></fa-icon>
          <b class="font-normal">Position</b>
        </div>
        
        <div class="flex flex-row items-center p-2 dark:hover:bg-slate-900 hover:bg-slate-500" (click)="selectSort('fps')">
          <div class="h-full w-1 bg-blue-500 rounded-full scale-125" *ngIf="srch_sortBy == 'fps'">
            <b class="opacity-0">e</b>
          </div>
          <fa-icon [icon]="i_fps" class="m-1"></fa-icon>
          <b class="font-normal">FPS</b>
        </div>
        
        <div class="flex flex-row items-center p-2 dark:hover:bg-slate-900 hover:bg-slate-500" (click)="selectSort('level_id')">
          <div class="h-full w-1 bg-blue-500 rounded-full scale-125" *ngIf="srch_sortBy == 'level_id'">
            <b class="opacity-0">e</b>
          </div>
          <fa-icon [icon]="i_time" class="m-1"></fa-icon>
          <b class="font-normal">Time</b>
        </div>
      </div>
    </div>

    <img src="../../assets/BNR_Base4.png" class="w-full mt-4 aspect-auto shadow-2xl rounded-2xl border-4 border-dashed border-spacing-2 dark:border-slate-800 border-slate-300" />


    <!-- page navigation Top -->
    <div class="flex flex-row bg-slate-200 dark:bg-slate-600 p-2 lg:w-fit w-64 mx-auto mt-4 text-xl text-black 
    dark:text-white rounded-lg shadow-lg items-center justify-around" *ngIf="!srch_showingSearchResults">
      <button class="bg-blue-600 p-2 m-3 rounded-lg shadow-lg hover:scale-105 hover:shadow-xl transition-all duration-300 disabled:bg-neutral-700 text-white align-middle" (click)="pageBck()" [disabled]="currentPage<=1">
        <fa-icon [icon]="i_arrLeft"></fa-icon>
      </button>
      <input type="number" [(ngModel)]="currentPage" (change)="    this.cutoutPage((this.currentPage-1)*this.pageSize, ((this.currentPage-1)*this.pageSize)+this.pageSize)" min="1" class="text-black lg:w-10 w-16 p-1 rounded-lg"/>
      <button class="bg-blue-600 p-2 m-3 rounded-lg shadow-lg hover:scale-105 hover:shadow-xl transition-all duration-300 disabled:bg-neutral-700 text-white align-middle" (click)="pageFwd()" [disabled]="false">
        <fa-icon [icon]="i_arrRight"></fa-icon>
      </button>
    </div>


    <!-- Levels -->
    
    <div class="h-fit lg:p-2 p-0 flex flex-col mt-2 mb-2 lg:rounded-md w-full"
    id="ILL_ListParent" *ngIf="listSorted">
      <b *ngIf="srch_showingSearchResults" class="font-light text-center">Showing search results for "{{srch_input}}" ({{levelListToDisplay.length}} results):</b>
      
      
      <app-list-element *ngFor="let level of levelListToDisplay" [ill_level]="level"></app-list-element>
      <!-- <app-list-element ></app-list-element> -->


      <!-- Error messages -->
      <div *ngIf="levelListToDisplay.length == 0 && !(srch_criteria == 'tag' && srch_input == 'No Victors')" 
      class="text-center flex flex-col bg-slate-100 dark:bg-slate-800 w-fit mx-auto p-5 m-1 rounded-lg shadow-lg -z-40">
        <b>Oops! We didn't find what you searched for!</b>
        <img src="../../assets/No_Results_Light.png" width="196" height="196" class="mx-auto origin-center" *ngIf="_currentTheme == 'light'"/>
        <img src="../../assets/No_Results_Dark.png" width="196" height="196" class="mx-auto origin-center" *ngIf="_currentTheme == 'dark'"/>
        <i>Check your search keywords and try again!</i>
      </div>
      <div *ngIf="srch_criteria == 'tag' && srch_input == 'No Victors'" class="text-center flex flex-col bg-slate-100 dark:bg-slate-800 w-fit mx-auto p-5 m-1 rounded-lg shadow-lg">
        <b>Why are you searching for this tag?</b>
        <img src="../../assets/lennard.png" width="196" height="196" class="mx-auto origin-center"/>
        <i>The list is literally all about this</i>
      </div>
    </div>

    <!-- Loading spinner -->
    <div class="bg-slate-200 dark:bg-slate-600 p-2 rounded-lg shadow-lg m-2 mx-auto" *ngIf="!listSorted">
      <mat-progress-spinner  mode="indeterminate" class="m-5 mx-auto" color="accent"></mat-progress-spinner>
    </div>
    
    <!-- page navigation Bottom -->
    <div class="flex flex-row bg-slate-200 dark:bg-slate-600 p-2 lg:w-fit w-64 mx-auto text-xl text-black 
    dark:text-white rounded-lg shadow-lg items-center justify-around" *ngIf="!srch_showingSearchResults">
      <button class="bg-blue-600 p-2 m-3 rounded-lg shadow-lg hover:scale-105 hover:shadow-xl transition-all duration-300 disabled:bg-neutral-700 text-white align-middle" (click)="pageBck()" [disabled]="currentPage<=1">
        <fa-icon [icon]="i_arrLeft"></fa-icon>
      </button>
      <input type="number" [(ngModel)]="currentPage" (change)="    this.cutoutPage((this.currentPage-1)*this.pageSize, ((this.currentPage-1)*this.pageSize)+this.pageSize)" min="1" class="text-black lg:w-10 w-16 p-1 rounded-lg"/>
      <button class="bg-blue-600 p-2 m-3 rounded-lg shadow-lg hover:scale-105 hover:shadow-xl transition-all duration-300 disabled:bg-neutral-700 text-white align-middle" (click)="pageFwd()" [disabled]="false">
        <fa-icon [icon]="i_arrRight"></fa-icon>
      </button>
    </div>
  </div>

  <!-- Sidebar 2 -->
  <div class="flex flex-col flex-shrink lg:w-[480px] top-0 right-0 min-h-screen lg:visible lg:p-4 absolute lg:relative invisible">
    <!-- Rules -->
    <div class="lg:mt-0 w-full p-4 flex-shrink bg-slate-300 dark:bg-slate-600 rounded-lg shadow-xl flex flex-col text-black 
    dark:text-white text-sm">
      <b class="text-lg">Basic Rules:</b>
      <li>Levels must be considered impossible or harder than any rated level at the time of their creation.</li>
      <li>Levels must be physically possible.</li>
      <li>Levels must be finished and of decent quality.</li>
      <li>Levels must not have spam faster than 15 inputs per player in a second.</li>
      <li>World records have a minimum progress percentage that is stated next to a levelâ€™s WR field.</li>
      <a class="m-1 p-2 text-sm rounded-lg bg-purple-700 text-white shadow-lg hover:scale-105 transition-all duration-300 w-fit"
      href="https://docs.google.com/document/d/1y7MwlMyiXxFiw0MRE2BYKHdThT-Q9DI6uN-9F3bOc5c">Link to more detailed rules</a>
    </div>
  </div>

</div>